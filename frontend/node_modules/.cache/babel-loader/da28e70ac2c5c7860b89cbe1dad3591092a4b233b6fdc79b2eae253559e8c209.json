{"ast":null,"code":"import React,{useContext,useEffect,useState}from\"react\";import{LoggedUserContext}from\"../../context/LoggedUserContext\";import axios from\"axios\";import{Card,Container,Spinner,Button}from\"react-bootstrap\";import BasicNav from\"../../components/Navbar\";import EditNotebookModal from\"../../components/modals/updateNotebookModal\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function UserNotebooks(){const{loggedUser}=useContext(LoggedUserContext);const[notebooks,setNotebooks]=useState([]);const[loading,setLoading]=useState(true);const[showCreateModal,setShowCreateModal]=useState(false);const[showEditModal,setShowEditModal]=useState(false);const[currentNotebook,setCurrentNotebook]=useState(null);const[updatedNotebook,setUpdatedNotebook]=useState({notebookName:\"\",notes:\"\",resolution:\"\"});const[newNotebook,setNewNotebook]=useState({notebookName:\"\",notes:\"\",resolution:\"\"});useEffect(()=>{const fetchNotebooks=async()=>{if(!loggedUser)return;try{const response=await axios.get(\"http://localhost:8080/notebooks\",{params:{userId:loggedUser.id}});setNotebooks(response.data);setLoading(false);}catch(error){console.error(\"Error fetching notebooks:\",error);setLoading(false);}};fetchNotebooks();},[loggedUser]);const handleShowEditModal=notebook=>{setCurrentNotebook(notebook);setUpdatedNotebook({notebookName:notebook.notebookName,notes:notebook.notes,resolution:notebook.resolution});setShowEditModal(true);};const handleUpdateNotebook=async()=>{try{await axios.post(`http://localhost:8080/notebooks/update`,{...currentNotebook,...updatedNotebook,type:\"mynotebook\"});setNotebooks(prev=>prev.map(nb=>nb.id===currentNotebook.id?{...nb,...updatedNotebook}:nb));setShowEditModal(false);}catch(error){console.error(\"Error updating notebook:\",error);}};const handleCreateNotebook=async()=>{try{const response=await axios.post(\"http://localhost:8080/notebooks/add\",{...newNotebook,user:loggedUser,type:\"mynotebook\"});setNotebooks(prev=>[...prev,response.data]);setShowCreateModal(false);setNewNotebook({notebookName:\"\",notes:\"\",resolution:\"\"});}catch(error){console.error(\"Error creating notebook:\",error);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(BasicNav,{}),/*#__PURE__*/_jsxs(Container,{className:\"mt-4\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Your Notebooks\"}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(Spinner,{animation:\"border\"})}):notebooks.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"You have no notebooks yet.\"}):notebooks.map(nb=>/*#__PURE__*/_jsx(Card,{className:\"mb-3 shadow-sm\",children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsxs(Card.Title,{children:[\"Notebook #\",nb.id]}),/*#__PURE__*/_jsxs(Card.Text,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Title:\"}),\" \",nb.notebookName]}),/*#__PURE__*/_jsxs(Card.Text,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Notes:\"}),\" \",nb.notes]}),/*#__PURE__*/_jsxs(Card.Text,{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Resolution:\"}),\" \",nb.resolution]}),/*#__PURE__*/_jsx(Button,{variant:\"warning\",onClick:()=>handleShowEditModal(nb),children:\"Update\"})]})},nb.id)),/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"mb-3\",onClick:()=>setShowCreateModal(true),children:\"+ Create Notebook\"})]}),/*#__PURE__*/_jsx(EditNotebookModal,{show:showEditModal,handleClose:()=>setShowEditModal(false),notebookData:updatedNotebook,setNotebookData:setUpdatedNotebook,handleSave:handleUpdateNotebook}),/*#__PURE__*/_jsx(EditNotebookModal,{show:showCreateModal,handleClose:()=>setShowCreateModal(false),notebookData:newNotebook,setNotebookData:setNewNotebook,handleSave:handleCreateNotebook})]});}export default UserNotebooks;","map":{"version":3,"names":["React","useContext","useEffect","useState","LoggedUserContext","axios","Card","Container","Spinner","Button","BasicNav","EditNotebookModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserNotebooks","loggedUser","notebooks","setNotebooks","loading","setLoading","showCreateModal","setShowCreateModal","showEditModal","setShowEditModal","currentNotebook","setCurrentNotebook","updatedNotebook","setUpdatedNotebook","notebookName","notes","resolution","newNotebook","setNewNotebook","fetchNotebooks","response","get","params","userId","id","data","error","console","handleShowEditModal","notebook","handleUpdateNotebook","post","type","prev","map","nb","handleCreateNotebook","user","children","className","animation","length","Body","Title","Text","variant","onClick","show","handleClose","notebookData","setNotebookData","handleSave"],"sources":["E:/AN3/SEM2/project-MichiMauser/frontend/src/pages/Home/UserNotebooks.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\r\nimport { LoggedUserContext } from \"../../context/LoggedUserContext\";\r\nimport axios from \"axios\";\r\nimport { Card, Container, Spinner, Button } from \"react-bootstrap\";\r\nimport BasicNav from \"../../components/Navbar\";\r\nimport EditNotebookModal from \"../../components/modals/updateNotebookModal\"; \r\n\r\nfunction UserNotebooks() {\r\n  const { loggedUser } = useContext(LoggedUserContext);\r\n  const [notebooks, setNotebooks] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [showCreateModal, setShowCreateModal] = useState(false);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [currentNotebook, setCurrentNotebook] = useState(null);\r\n  const [updatedNotebook, setUpdatedNotebook] = useState({\r\n    notebookName: \"\",\r\n    notes: \"\",\r\n    resolution: \"\",\r\n  });\r\n\r\n  const [newNotebook, setNewNotebook] = useState({\r\n    notebookName: \"\",\r\n    notes: \"\",\r\n    resolution: \"\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchNotebooks = async () => {\r\n      if (!loggedUser) return;\r\n\r\n      try {\r\n        const response = await axios.get(\"http://localhost:8080/notebooks\", {\r\n          params: { userId: loggedUser.id },\r\n        });\r\n        setNotebooks(response.data);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        console.error(\"Error fetching notebooks:\", error);\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchNotebooks();\r\n  }, [loggedUser]);\r\n\r\n  const handleShowEditModal = (notebook) => {\r\n    setCurrentNotebook(notebook);\r\n    setUpdatedNotebook({\r\n      notebookName: notebook.notebookName,\r\n      notes: notebook.notes,\r\n      resolution: notebook.resolution,\r\n    });\r\n    setShowEditModal(true);\r\n  };\r\n\r\n  const handleUpdateNotebook = async () => {\r\n    try {\r\n      await axios.post(`http://localhost:8080/notebooks/update`, {\r\n        ...currentNotebook,\r\n        ...updatedNotebook,\r\n        type: \"mynotebook\",\r\n      });\r\n  \r\n      setNotebooks((prev) =>\r\n        prev.map((nb) =>\r\n          nb.id === currentNotebook.id ? { ...nb, ...updatedNotebook } : nb\r\n        )\r\n      );\r\n  \r\n      setShowEditModal(false);\r\n    } catch (error) {\r\n      console.error(\"Error updating notebook:\", error);\r\n    }\r\n  };\r\n\r\n  const handleCreateNotebook = async () => {\r\n    try {\r\n      const response = await axios.post(\"http://localhost:8080/notebooks/add\", {\r\n        ...newNotebook,\r\n        user: loggedUser, \r\n        type: \"mynotebook\", \r\n      });\r\n  \r\n      setNotebooks((prev) => [...prev, response.data]);\r\n      setShowCreateModal(false);\r\n      setNewNotebook({ notebookName: \"\", notes: \"\", resolution: \"\" });\r\n    } catch (error) {\r\n      console.error(\"Error creating notebook:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <BasicNav />\r\n      <Container className=\"mt-4\">\r\n        <h3>Your Notebooks</h3>\r\n\r\n        {loading ? (\r\n          <div className=\"text-center\">\r\n            <Spinner animation=\"border\" />\r\n          </div>\r\n        ) : notebooks.length === 0 ? (\r\n          <p className=\"text-muted\">You have no notebooks yet.</p>\r\n        ) : (\r\n          notebooks.map((nb) => (\r\n            <Card key={nb.id} className=\"mb-3 shadow-sm\">\r\n              <Card.Body>\r\n                <Card.Title>Notebook #{nb.id}</Card.Title>\r\n                <Card.Text><strong>Title:</strong> {nb.notebookName}</Card.Text>\r\n                <Card.Text><strong>Notes:</strong> {nb.notes}</Card.Text>\r\n                <Card.Text><strong>Resolution:</strong> {nb.resolution}</Card.Text>\r\n                <Button variant=\"warning\" onClick={() => handleShowEditModal(nb)}>\r\n                  Update\r\n                </Button>\r\n              </Card.Body>\r\n            </Card>\r\n          ))\r\n        )}\r\n        <Button variant=\"primary\" className=\"mb-3\" onClick={() => setShowCreateModal(true)}>\r\n            + Create Notebook\r\n        </Button>\r\n      </Container>\r\n\r\n      \r\n      <EditNotebookModal\r\n         show={showEditModal}\r\n         handleClose={() => setShowEditModal(false)}\r\n         notebookData={updatedNotebook}\r\n         setNotebookData={setUpdatedNotebook}\r\n         handleSave={handleUpdateNotebook}\r\n      />\r\n\r\n     \r\n      <EditNotebookModal\r\n         show={showCreateModal}\r\n         handleClose={() => setShowCreateModal(false)}\r\n         notebookData={newNotebook}\r\n         setNotebookData={setNewNotebook}\r\n         handleSave={handleCreateNotebook}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UserNotebooks;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}