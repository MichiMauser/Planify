{"ast":null,"code":"import React,{createContext,useContext,useEffect,useState}from\"react\";import\"../../styles/Login.css\";import{Container,Card}from\"react-bootstrap\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{LoggedUserContext}from\"../../context/LoggedUserContext\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const{setLoggedUser}=useContext(LoggedUserContext);const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[errFlag,setErrFlag]=useState(null);const navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();try{const response=await axios.post(\"http://localhost:8080/user/login\",{email,password});console.log(response.data);setLoggedUser(response.data);setErrFlag(false);navigate(\"/\");}catch(error){console.error(\"Login failed\",error);setErrFlag(true);}};useEffect(()=>{document.body.classList.add('login-page');return()=>{document.body.classList.remove('login-page');};},[]);return/*#__PURE__*/_jsx(Container,{className:\"d-flex justify-content-center align-items-center min-vh-100\",children:/*#__PURE__*/_jsxs(Card,{className:\"login-card shadow-lg p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Email\",className:\"form-control mb-3\",onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",className:\"form-control mb-3\",onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary w-100\",children:\"Login\"}),errFlag&&/*#__PURE__*/_jsx(\"p\",{className:\"text-bg-danger mt-2\",children:\"Invalid credentials \"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"signup-link mt-3 text-center\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\" \",/*#__PURE__*/_jsx(\"a\",{href:\"/\",children:\"Enter as a guest\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"signup-link mt-3 text-center\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"Sign up\"})]})})]})});}export default Login;","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","Container","Card","useNavigate","axios","LoggedUserContext","jsx","_jsx","jsxs","_jsxs","Login","setLoggedUser","email","setEmail","password","setPassword","errFlag","setErrFlag","navigate","handleSubmit","e","preventDefault","response","post","console","log","data","error","document","body","classList","add","remove","className","children","onSubmit","type","placeholder","onChange","target","value","href"],"sources":["E:/AN3/SEM2/project-MichiMauser/frontend/src/pages/Auth/Login.js"],"sourcesContent":["import React, { createContext, useContext, useEffect, useState } from \"react\";\r\nimport \"../../styles/Login.css\";\r\nimport { Container, Card } from \"react-bootstrap\";\r\nimport {useNavigate} from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { LoggedUserContext } from \"../../context/LoggedUserContext\";\r\n\r\nfunction Login() {\r\n  const {setLoggedUser} = useContext(LoggedUserContext); \r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [errFlag, setErrFlag] = useState(null);\r\n  const navigate = useNavigate();\r\n  const handleSubmit = async(e) => {\r\n    \r\n    e.preventDefault();\r\n    try{\r\n      const response = await axios.post(\"http://localhost:8080/user/login\", {\r\n        email,\r\n        password\r\n      });\r\n      console.log(response.data)\r\n      setLoggedUser(response.data)\r\n      setErrFlag(false);\r\n      navigate(\"/\");\r\n    }catch(error){\r\n      console.error(\"Login failed\", error);\r\n      setErrFlag(true);\r\n    }\r\n  }\r\n    useEffect(() => {\r\n       \r\n        document.body.classList.add('login-page');\r\n        \r\n        return () => {\r\n          document.body.classList.remove('login-page');\r\n        };\r\n      }, []);\r\n\r\n    return (\r\n        <Container className=\"d-flex justify-content-center align-items-center min-vh-100\">\r\n          <Card className=\"login-card shadow-lg p-4\">\r\n            <h2 className=\"text-center mb-4\">Login</h2>\r\n            <form className=\"login-form\" onSubmit={handleSubmit}>\r\n              <input type=\"text\" placeholder=\"Email\" className=\"form-control mb-3\" onChange = {(e) => setEmail(e.target.value) } />\r\n              <input type=\"password\" placeholder=\"Password\" className=\"form-control mb-3\" onChange = {(e) => setPassword(e.target.value)} />\r\n              <button type=\"submit\" className=\"btn btn-primary w-100\">Login</button>\r\n          \r\n              {errFlag && \r\n            <p className=\"text-bg-danger mt-2\">Invalid credentials </p>}\r\n        \r\n            </form>\r\n            <div className=\"signup-link mt-3 text-center\">\r\n              <p> <a href=\"/\">Enter as a guest</a></p>\r\n            </div>\r\n            <div className=\"signup-link mt-3 text-center\">\r\n              <p>Don't have an account? <a href=\"/register\">Sign up</a></p>\r\n            </div>\r\n          </Card>\r\n        </Container>\r\n      );\r\n}\r\n\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}